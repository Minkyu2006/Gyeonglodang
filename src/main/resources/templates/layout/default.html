<!DOCTYPE html>
<html lang="ko">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0, minimum-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

		<title>Dashboard</title>

		<link rel="stylesheet" href="/assets/css/fontawesome/all.min.css">
		<link rel="stylesheet" href="/assets/css/fontawesome/brands.min.css">
		<link rel="stylesheet" href="/assets/css/fontawesome/regular.min.css">
		<link rel="stylesheet" href="/assets/css/fontawesome/solid.min.css">
		<link rel="stylesheet" type="text/css" href="/assets/css/common.css">

		<script src="/assets/js/jquery.min.js"></script>
		<script src="/assets/js/circle-progress/circle-progress.js"></script>
		<script src="/assets/js/common.js"></script>

		<script>
			// 퇴실버튼
			function outGo() {
				$.ajax({
					url: '/exitGo/outGo',
					type: 'post',
					cache: false,
					error: function () {
						alert('퇴실실패');
					},
					success: function (res) {
						var doorsensor = JSON.parse(res.data.doorsensor.r_data);
						var doorsensorStatus = doorsensor.rm1dr01;
						var $doorStatus = $('#doorStatus');
						if(doorsensorStatus==="off"){
							$doorStatus.removeClass("active")
							$('#alertmsg').html("약 30분후 <br> 가전, 조명, 전기가 차단됩니다.")
							$('#alertarea').addClass('active');
							setTimeout(function() {
								$('#alertarea').removeClass('active');
							}, 5000)
						}else{
							$doorStatus.addClass("active")
							$('#alertmsg').html("약 30분후 <br> 가전, 조명, 전기가 차단됩니다.<br>(현재 사무실 문이 열려있습니다.)")
							$('#alertarea').addClass('active');
							setTimeout(function() {
								$('#alertarea').removeClass('active');
							}, 5000)
						}
					}
				});
			}
			//문열기
			function doorOpen(value) {
				var params = {
					value: value
				};
				$.ajax({
					url: '/homedata/opendoor',
					type: 'post',
					data: params,
					cache: false
				});
			}
		</script>
    </head>
</html>
